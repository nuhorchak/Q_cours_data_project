---
output: 
  word_document:
    reference_docx: memo_format.docx
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE,
                       fig.align = "center", fig.width = 8)
```

```{r}
library(tidyverse)
library(lubridate)
library(forecast)
library(RSocrata)
load('border_crossings.rda')
```

## FA49QRS

<br>

### MEMORANDUM FOR U.S. Army Analytic Agency
### ATTN: Ms. Janet Smith

<br>

### SUBJECT: United States Border Crossing Information Paper

<br>

<br>

1.Purpose: To provide insights gathered from the border crossing/entry dataset.

<br>

2.Backgorund: The Border Crossing/Entry dataset contains `r format(nrow(data_pull), big.mark=",")` records, pertaining to `r ncol(data_pull)` distinct measures (variables). The dataset specifically measures border crossing at the U.S.-Canada and the U.S.-Mexico border, at the port level[^1].  Data are available for the following crossing methods: `r unique(data_pull$measure)`[^2]. Data are available from `r format(min(data_pull$date), format = '%Y')`, for `r data_pull %>% filter(., date <= '1997-01-01') %>% filter(!duplicated(port_name)) %>% select(port_name) %>% nrow()`  of `r data_pull %$% unique(port_name) %>% length()` port cities, with multiple additional dates for the remaining ports.

<br>

3.Assumptions: The following assumptions are made with regard to the border crossing dataset:

 - Border crossings are documented individuals, and do not represent smuggling.
 - All crossings are reported for the port city on record, and not surrounding areas.
 - Each crossing represents an individual or vehicle, but may be duplicated at another time in the dataset (can cross multiple times in a period).

<br> 

4.Discussion: The border crossing dataset presents various interesting facets, to include periodicity of the port cities, differences between northern and southern borders, anomolies, and future forecasts.

<br>

  a. Every border crossing city experiences periodicity of some sort, especially those where personal passener vehicles and pedestrian traffic is predominant. This phenomenon is evident in Piegan, MT (Figure A), where both personal vehicles and personal passenger vehicles are the predominant method of transportation, and significant spikes occur each year.  Similarly, we see that a similar trend is present for Skagway, AK, with buss passengers as the predominant mode of transportation (Figure B).  

<br>

  b. There exists a significantly larger traffic footprint at the U.S.-Mexico border, than the U.S.-Canada border. Although inference is not made with regards to reasons, in the largest metric, Personal Passenger Vehicles, the largest yearly value for the US-Mexico border is nearly doube that of the US-Canada border. Within the US-Mexico subset, even greater variation exists between port cities, where Personal Passenger Vehicles range from zero(not allowed) to in excess of 23 million per year.

<br>

  c. Anomolies exists within the dataset that warraint further examination, beyond this analysis. In the port city of Van Buren, Maine (Figure C), the metric for Personal Passenger Vehicles decreases to zero, causing large downward spikes in the time series graph. Similarly, in Point Roberts, Washington (Figure D) there is a signficant spike in Personal Passenger Vehicles, well beyond the normal seasonl variation. Finally, for all port cities, significant declines in all metrics occur around 2020, which can be attributed to COVID restrictions, but is still anomalous given the entire time series presented.
  
  d. Forecasts for any given port may produce inaccurate results, given the significant decrease in port traffic at the beginin of 2020, as shown in Figure X.

<br>

5.Findings:  This analysis does somethingâ€¦

<br>

\newpage

### Appendix 1 - Figures

<br>

```{r Piegan, fig.cap="Figure A - Piegan, MT"}
data_pull %>% 
  filter(port_name == 'Piegan') %>%
  ggplot(., aes(date, value, color=measure, linetype=measure)) + geom_line() +
  theme(axis.text.x = element_text(angle = 90)) +
  ggtitle("Figure A - Piegan, MT Port Entries") +
  ylab("Total Entries") + xlab("Date")
```

<br> 

```{r Skagway, fig.cap="Figure B - Skagway, AK"}
data_pull %>% 
  filter(port_name == 'Skagway') %>%
  ggplot(., aes(date, value, color=measure, linetype=measure)) + geom_line() +
  theme(axis.text.x = element_text(angle = 90)) +
  ggtitle("Figure B - Skagway, AK Port Entries") +
  ylab("Total Entries") + xlab("Date")
```

```{r Van Buren, fig.cap="Figure C - Van Buren, ME"}
data_pull %>% 
  filter(port_name == 'Van Buren') %>%
  ggplot(., aes(date, value, color=measure, linetype=measure)) + geom_line() +
  theme(axis.text.x = element_text(angle = 90)) +
  ggtitle("Figure C - Van Buren, ME Port Entries") +
  ylab("Total Entries") + xlab("Date")
```

[^1]: Border Crossing/Entry Data. Accessed on 11Jun21. https://www.bts.gov/browse-statistical-products-and-data/border-crossing-data/border-crossingentry-data
[^2]: Ibid.
